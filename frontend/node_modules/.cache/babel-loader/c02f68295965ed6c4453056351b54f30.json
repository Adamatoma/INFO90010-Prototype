{"ast":null,"code":"var _jsxFileName = \"/Users/panyutong/Desktop/\\u5B66\\u4E60/INFO90010 IT project/prototype/INFO90010-Prototype/frontend/src/pages/priceComparison.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { withGoogleMap, withScriptjs, useLoadScript, GoogleMap, Marker, InfoWindow } from \"react-google-maps\";\nimport Navbar from \"../components/Navbar\";\nimport logo from '../icons/Home.png';\nimport './priceComparison.css';\nimport * as propertyData from \"../components/skateboard-parks.json\"; // import Map from '../components/Map';\n\nimport Background from '../icons/background.png';\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from \"use-places-autocomplete\";\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from \"@reach/combobox\";\n\nfunction Map() {\n  const [markers, setMarkers] = React.useState([]);\n  const [selectedBuilding, setselectedBuilding] = useState(null);\n  useEffect(() => {\n    const listener = e => {\n      if (e.key === \"Escape\") {\n        setselectedBuilding(null);\n      }\n    };\n\n    window.addEventListener(\"keydown\", listener);\n    return () => {\n      window.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n  const onMapClick = React.useCallback(e => {\n    setMarkers(current => [...current, {\n      lat: e.latLng.lat(),\n      lng: e.latLng.lng(),\n      time: new Date()\n    }]);\n  }, []);\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback(map => {\n    mapRef.current = map;\n  }, []);\n  const panTo = React.useCallback(({\n    lat,\n    lng\n  }) => {\n    mapRef.current.panTo({\n      lat,\n      lng\n    });\n    mapRef.current.setZoom(14);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    panTo: panTo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(GoogleMap, {\n    id: \"map\",\n    defaultZoom: 16,\n    defaultCenter: {\n      lat: -37.807695,\n      lng: 144.961434\n    },\n    onLoad: onMapLoad,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, propertyData.Buildings.map(building => /*#__PURE__*/React.createElement(Marker, {\n    key: building.Id,\n    position: {\n      lat: building.geometry.coordinates[1],\n      lng: building.geometry.coordinates[0]\n    },\n    onClick: () => {\n      setselectedBuilding(building);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  })), selectedBuilding && /*#__PURE__*/React.createElement(InfoWindow, {\n    onCloseClick: () => {\n      setselectedBuilding(null);\n    },\n    position: {\n      lat: selectedBuilding.geometry.coordinates[1],\n      lng: selectedBuilding.geometry.coordinates[0]\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, selectedBuilding.Properties.sort((a, b) => a.Origin[0].Price - b.Origin[0].Price).map((property, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"image\",\n      style: imageStyle,\n      src: property.Src,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 25\n      }\n    }, \"Agent: \", property.Agent), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, \"Type:\", property.Bedroom, \" Bedroom \", property.Bathroom, \" Bathroom \", property.Parking, \" Parking area\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 25\n      }\n    }, \"Location: \", property.Location), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 25\n      }\n    }, \"Distance:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 23\n      }\n    }, property.Origin.map((Source, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        className: \"content-right-main\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-right-name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: Source.Url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 33\n        }\n      }, Source.Name)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-right-price\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 33\n        }\n      }, \"$ \", Source.Price)));\n    })));\n  })))));\n}\n\nfunction Search({\n  panTo\n}) {\n  const {\n    ready,\n    value,\n    suggestions: {\n      status,\n      data\n    },\n    setValue,\n    clearSuggestions\n  } = usePlacesAutocomplete({\n    requestOptions: {\n      location: {\n        lat: () => 43.6532,\n        lng: () => -79.3832\n      },\n      radius: 100 * 1000\n    }\n  }); // https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service#AutocompletionRequest\n\n  const handleInput = e => {\n    setValue(e.target.value);\n  };\n\n  const handleSelect = async address => {\n    setValue(address, false);\n    clearSuggestions();\n\n    try {\n      const results = await getGeocode({\n        address\n      });\n      const {\n        lat,\n        lng\n      } = await getLatLng(results[0]); // console.log(result);\n      // panTo({ lat, lng });\n    } catch (error) {\n      console.log(\"ðŸ˜± Error: \", error);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Combobox, {\n    onSelect: handleSelect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ComboboxInput, {\n    value: value,\n    onChange: handleInput,\n    disabled: !ready,\n    placeholder: \"Search your location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ComboboxPopover, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ComboboxList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, status === \"OK\" && data.map(({\n    id,\n    description\n  }) => /*#__PURE__*/React.createElement(ComboboxOption, {\n    key: id,\n    value: description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }))))));\n}\n\nvar backgroundStyle = {\n  backgroundSize: 'cover',\n  height: \"300px\",\n  backgroundRepeat: 'no-repeat',\n  opacity: '0.3',\n  backgroundImage: `url(${Background})`\n};\nvar imageStyle = {\n  width: \"200px\",\n  height: \"200px\",\n  backgroundRepeat: 'no-repeat'\n};\n\nclass PriceComparison extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pc: []\n    };\n  }\n\n  callAPI() {\n    fetch(\"http://localhost:3000/priceComparison\").then(res => res.json()).then(res => this.setState({\n      pc: res.data\n    })).catch(err => console.error(err));\n  }\n\n  componentDidMount() {\n    this.callAPI();\n  }\n\n  render() {\n    // var result = this.state.pc;\n    // var numOfResult = result.length;\n    // console.log(result);\n    const MapWrapped = withScriptjs(withGoogleMap(Map));\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"heading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"logo\",\n      src: logo,\n      alt: \"Logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }\n    }, \"AusNewRenters\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-box\",\n      style: backgroundStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"map-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"906px\",\n        height: \"458px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MapWrapped, {\n      googleMapURL: `https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=${process.env.REACT_APP_GOOGLE_KEY}&language=en-AU`,\n      loadingElement: /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: `100%`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 31\n        }\n      }),\n      containerElement: /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: `100%`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 33\n        }\n      }),\n      mapElement: /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: `100%`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 27\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default PriceComparison;","map":{"version":3,"sources":["/Users/panyutong/Desktop/å­¦ä¹ /INFO90010 IT project/prototype/INFO90010-Prototype/frontend/src/pages/priceComparison.js"],"names":["React","useState","useEffect","withGoogleMap","withScriptjs","useLoadScript","GoogleMap","Marker","InfoWindow","Navbar","logo","propertyData","Background","usePlacesAutocomplete","getGeocode","getLatLng","Combobox","ComboboxInput","ComboboxPopover","ComboboxList","ComboboxOption","Map","markers","setMarkers","selectedBuilding","setselectedBuilding","listener","e","key","window","addEventListener","removeEventListener","onMapClick","useCallback","current","lat","latLng","lng","time","Date","mapRef","useRef","onMapLoad","map","panTo","setZoom","Buildings","building","Id","geometry","coordinates","Properties","sort","a","b","Origin","Price","property","index","imageStyle","Src","Agent","Bedroom","Bathroom","Parking","Location","Source","Url","Name","Search","ready","value","suggestions","status","data","setValue","clearSuggestions","requestOptions","location","radius","handleInput","target","handleSelect","address","results","error","console","log","id","description","backgroundStyle","backgroundSize","height","backgroundRepeat","opacity","backgroundImage","width","PriceComparison","Component","constructor","props","state","pc","callAPI","fetch","then","res","json","setState","catch","err","componentDidMount","render","MapWrapped","process","env","REACT_APP_GOOGLE_KEY"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SACEC,aADF,EAEEC,YAFF,EAGEC,aAHF,EAIEC,SAJF,EAKEC,MALF,EAMEC,UANF,QAOO,mBAPP;AAQA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAO,uBAAP;AACA,OAAO,KAAKC,YAAZ,MAA8B,qCAA9B,C,CACA;;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,qBAAP,IACEC,UADF,EAEEC,SAFF,QAGO,yBAHP;AAIA,SACEC,QADF,EAEEC,aAFF,EAGEC,eAHF,EAIEC,YAJF,EAKEC,cALF,QAMO,iBANP;;AAOA,SAASC,GAAT,GAAe;AACb,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBvB,KAAK,CAACC,QAAN,CAAe,EAAf,CAA9B;AACA,QAAM,CAACuB,gBAAD,EAAmBC,mBAAnB,IAA0CxB,QAAQ,CAAC,IAAD,CAAxD;AACAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMwB,QAAQ,GAAGC,CAAC,IAAI;AACpB,UAAIA,CAAC,CAACC,GAAF,KAAU,QAAd,EAAwB;AACtBH,QAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACD;AACF,KAJD;;AAKAI,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCJ,QAAnC;AAEA,WAAO,MAAM;AACXG,MAAAA,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCL,QAAtC;AACD,KAFD;AAGD,GAXQ,EAWN,EAXM,CAAT;AAaA,QAAMM,UAAU,GAAGhC,KAAK,CAACiC,WAAN,CAAmBN,CAAD,IAAO;AAC1CJ,IAAAA,UAAU,CAAEW,OAAD,IAAa,CACtB,GAAGA,OADmB,EAEtB;AACEC,MAAAA,GAAG,EAAER,CAAC,CAACS,MAAF,CAASD,GAAT,EADP;AAEEE,MAAAA,GAAG,EAAEV,CAAC,CAACS,MAAF,CAASC,GAAT,EAFP;AAGEC,MAAAA,IAAI,EAAE,IAAIC,IAAJ;AAHR,KAFsB,CAAd,CAAV;AAQD,GATkB,EAShB,EATgB,CAAnB;AAWA,QAAMC,MAAM,GAAGxC,KAAK,CAACyC,MAAN,EAAf;AACA,QAAMC,SAAS,GAAG1C,KAAK,CAACiC,WAAN,CAAmBU,GAAD,IAAS;AAC3CH,IAAAA,MAAM,CAACN,OAAP,GAAiBS,GAAjB;AACD,GAFiB,EAEf,EAFe,CAAlB;AAIA,QAAMC,KAAK,GAAG5C,KAAK,CAACiC,WAAN,CAAkB,CAAC;AAAEE,IAAAA,GAAF;AAAOE,IAAAA;AAAP,GAAD,KAAkB;AAChDG,IAAAA,MAAM,CAACN,OAAP,CAAeU,KAAf,CAAqB;AAAET,MAAAA,GAAF;AAAOE,MAAAA;AAAP,KAArB;AACAG,IAAAA,MAAM,CAACN,OAAP,CAAeW,OAAf,CAAuB,EAAvB;AACD,GAHa,EAGX,EAHW,CAAd;AAKA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAED,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,SAAD;AACE,IAAA,EAAE,EAAC,KADL;AAEE,IAAA,WAAW,EAAE,EAFf;AAGE,IAAA,aAAa,EAAE;AAAET,MAAAA,GAAG,EAAE,CAAC,SAAR;AAAmBE,MAAAA,GAAG,EAAE;AAAxB,KAHjB;AAIE,IAAA,MAAM,EAAEK,SAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMG/B,YAAY,CAACmC,SAAb,CAAuBH,GAAvB,CAA2BI,QAAQ,iBAClC,oBAAC,MAAD;AACE,IAAA,GAAG,EAAEA,QAAQ,CAACC,EADhB;AAEE,IAAA,QAAQ,EAAE;AACRb,MAAAA,GAAG,EAAEY,QAAQ,CAACE,QAAT,CAAkBC,WAAlB,CAA8B,CAA9B,CADG;AAERb,MAAAA,GAAG,EAAEU,QAAQ,CAACE,QAAT,CAAkBC,WAAlB,CAA8B,CAA9B;AAFG,KAFZ;AAME,IAAA,OAAO,EAAE,MAAM;AACbzB,MAAAA,mBAAmB,CAACsB,QAAD,CAAnB;AACD,KARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CANH,EAmBGvB,gBAAgB,iBACf,oBAAC,UAAD;AACE,IAAA,YAAY,EAAE,MAAM;AAClBC,MAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACD,KAHH;AAIE,IAAA,QAAQ,EAAE;AACRU,MAAAA,GAAG,EAAEX,gBAAgB,CAACyB,QAAjB,CAA0BC,WAA1B,CAAsC,CAAtC,CADG;AAERb,MAAAA,GAAG,EAAEb,gBAAgB,CAACyB,QAAjB,CAA0BC,WAA1B,CAAsC,CAAtC;AAFG,KAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG1B,gBAAgB,CAAC2B,UAAjB,CACEC,IADF,CACO,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACE,MAAF,CAAS,CAAT,EAAYC,KAAZ,GAAoBF,CAAC,CAACC,MAAF,CAAS,CAAT,EAAYC,KADjD,EAEEb,GAFF,CAEM,CAACc,QAAD,EAAWC,KAAX,KAAqB;AACxB,wBACE;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,SAAS,EAAC,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAuB,MAAA,KAAK,EAAEC,UAA9B;AAA0C,MAAA,GAAG,EAAEF,QAAQ,CAACG,GAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,eAIE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAWH,QAAQ,CAACI,KAApB,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAASJ,QAAQ,CAACK,OAAlB,eAAoCL,QAAQ,CAACM,QAA7C,gBAAiEN,QAAQ,CAACO,OAA1E,kBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAcP,QAAQ,CAACQ,QAAvB,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJF,CAJF,eAUE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGR,QAAQ,CAACF,MAAT,CAAgBZ,GAAhB,CAAoB,CAACuB,MAAD,EAASR,KAAT,KAAmB;AACtC,0BACE;AAAK,QAAA,GAAG,EAAEA,KAAV;AAAiB,QAAA,SAAS,EAAC,oBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,IAAI,EAAEQ,MAAM,CAACC,GAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAsBD,MAAM,CAACE,IAA7B,CADF,CADF,eAIE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAMF,MAAM,CAACV,KAAb,CADF,CAJF,CADF;AAUD,KAXA,CADH,CAVF,CADF;AA4BD,GA/BF,CADH,CATF,CApBJ,CAFF,CADF;AAyED;;AAED,SAASa,MAAT,CAAgB;AAAEzB,EAAAA;AAAF,CAAhB,EAA2B;AACzB,QAAM;AACJ0B,IAAAA,KADI;AAEJC,IAAAA,KAFI;AAGJC,IAAAA,WAAW,EAAE;AAAEC,MAAAA,MAAF;AAAUC,MAAAA;AAAV,KAHT;AAIJC,IAAAA,QAJI;AAKJC,IAAAA;AALI,MAMF/D,qBAAqB,CAAC;AACxBgE,IAAAA,cAAc,EAAE;AACdC,MAAAA,QAAQ,EAAE;AAAE3C,QAAAA,GAAG,EAAE,MAAM,OAAb;AAAsBE,QAAAA,GAAG,EAAE,MAAM,CAAC;AAAlC,OADI;AAEd0C,MAAAA,MAAM,EAAE,MAAM;AAFA;AADQ,GAAD,CANzB,CADyB,CAczB;;AAEA,QAAMC,WAAW,GAAIrD,CAAD,IAAO;AACzBgD,IAAAA,QAAQ,CAAChD,CAAC,CAACsD,MAAF,CAASV,KAAV,CAAR;AACD,GAFD;;AAIA,QAAMW,YAAY,GAAG,MAAOC,OAAP,IAAmB;AACtCR,IAAAA,QAAQ,CAACQ,OAAD,EAAU,KAAV,CAAR;AACAP,IAAAA,gBAAgB;;AAEhB,QAAI;AACF,YAAMQ,OAAO,GAAG,MAAMtE,UAAU,CAAC;AAAEqE,QAAAA;AAAF,OAAD,CAAhC;AACA,YAAM;AAAEhD,QAAAA,GAAF;AAAOE,QAAAA;AAAP,UAAe,MAAMtB,SAAS,CAACqE,OAAO,CAAC,CAAD,CAAR,CAApC,CAFE,CAGF;AACA;AACD,KALD,CAKE,OAAOC,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BF,KAA1B;AACD;AACF,GAZD;;AAcA,sBACE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,QAAQ,EAAEH,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,aAAD;AACE,IAAA,KAAK,EAAEX,KADT;AAEE,IAAA,QAAQ,EAAES,WAFZ;AAGE,IAAA,QAAQ,EAAE,CAACV,KAHb;AAIE,IAAA,WAAW,EAAC,sBAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAOE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGG,MAAM,KAAK,IAAX,IACCC,IAAI,CAAC/B,GAAL,CAAS,CAAC;AAAE6C,IAAAA,EAAF;AAAMC,IAAAA;AAAN,GAAD,kBACP,oBAAC,cAAD;AAAgB,IAAA,GAAG,EAAED,EAArB;AAAyB,IAAA,KAAK,EAAEC,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFJ,CADF,CAPF,CADF,CADF;AAoBD;;AAGD,IAAIC,eAAe,GAAG;AACpBC,EAAAA,cAAc,EAAE,OADI;AAEpBC,EAAAA,MAAM,EAAE,OAFY;AAGpBC,EAAAA,gBAAgB,EAAE,WAHE;AAIpBC,EAAAA,OAAO,EAAE,KAJW;AAKpBC,EAAAA,eAAe,EAAG,OAAMnF,UAAW;AALf,CAAtB;AASA,IAAI+C,UAAU,GAAG;AACfqC,EAAAA,KAAK,EAAE,OADQ;AAEfJ,EAAAA,MAAM,EAAE,OAFO;AAGfC,EAAAA,gBAAgB,EAAE;AAHH,CAAjB;;AAMA,MAAMI,eAAN,SAA8BjG,KAAK,CAACkG,SAApC,CAA8C;AAC5CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,EAAE,EAAE;AADO,KAAb;AAGD;;AAGDC,EAAAA,OAAO,GAAG;AACRC,IAAAA,KAAK,CAAC,uCAAD,CAAL,CACGC,IADH,CACQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADf,EAEGF,IAFH,CAEQC,GAAG,IAAI,KAAKE,QAAL,CAAc;AAAEN,MAAAA,EAAE,EAAEI,GAAG,CAAChC;AAAV,KAAd,CAFf,EAGGmC,KAHH,CAGSC,GAAG,IAAIxB,OAAO,CAACD,KAAR,CAAcyB,GAAd,CAHhB;AAID;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKR,OAAL;AAED;;AAEDS,EAAAA,MAAM,GAAG;AACP;AACA;AACA;AACA,UAAMC,UAAU,GAAG7G,YAAY,CAACD,aAAa,CAACkB,GAAD,CAAd,CAA/B;AAEA,wBACE,uDACE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAsB,MAAA,GAAG,EAAEX,IAA3B;AAAiC,MAAA,GAAG,EAAC,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAI,MAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAFF,CADF,eAME;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CANF,eASE;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,KAAK,EAAEgF,eAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,eAWE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAE;AAAEM,QAAAA,KAAK,EAAE,OAAT;AAAkBJ,QAAAA,MAAM,EAAE;AAA1B,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AACE,MAAA,YAAY,EAAG,yFACbsB,OAAO,CAACC,GAAR,CAAYC,oBACX,iBAHL;AAIE,MAAA,cAAc,eAAE;AAAK,QAAA,KAAK,EAAE;AAAExB,UAAAA,MAAM,EAAG;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJlB;AAKE,MAAA,gBAAgB,eAAE;AAAK,QAAA,KAAK,EAAE;AAAEA,UAAAA,MAAM,EAAG;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALpB;AAME,MAAA,UAAU,eAAE;AAAK,QAAA,KAAK,EAAE;AAAEA,UAAAA,MAAM,EAAG;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CAXF,CADF;AA2BD;;AAtD2C;;AA6D9C,eAAeK,eAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  withGoogleMap,\n  withScriptjs,\n  useLoadScript,\n  GoogleMap,\n  Marker,\n  InfoWindow\n} from \"react-google-maps\";\nimport Navbar from \"../components/Navbar\";\nimport logo from '../icons/Home.png';\nimport './priceComparison.css';\nimport * as propertyData from \"../components/skateboard-parks.json\";\n// import Map from '../components/Map';\nimport Background from '../icons/background.png';\nimport usePlacesAutocomplete, {\n  getGeocode,\n  getLatLng,\n} from \"use-places-autocomplete\";\nimport {\n  Combobox,\n  ComboboxInput,\n  ComboboxPopover,\n  ComboboxList,\n  ComboboxOption,\n} from \"@reach/combobox\";\nfunction Map() {\n  const [markers, setMarkers] = React.useState([]);\n  const [selectedBuilding, setselectedBuilding] = useState(null);\n  useEffect(() => {\n    const listener = e => {\n      if (e.key === \"Escape\") {\n        setselectedBuilding(null);\n      }\n    };\n    window.addEventListener(\"keydown\", listener);\n\n    return () => {\n      window.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n\n  const onMapClick = React.useCallback((e) => {\n    setMarkers((current) => [\n      ...current,\n      {\n        lat: e.latLng.lat(),\n        lng: e.latLng.lng(),\n        time: new Date(),\n      },\n    ]);\n  }, []);\n\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback((map) => {\n    mapRef.current = map;\n  }, []);\n\n  const panTo = React.useCallback(({ lat, lng }) => {\n    mapRef.current.panTo({ lat, lng });\n    mapRef.current.setZoom(14);\n  }, []);\n\n  return (\n    <div>\n      <Search panTo={panTo} />\n      <GoogleMap\n        id=\"map\"\n        defaultZoom={16}\n        defaultCenter={{ lat: -37.807695, lng: 144.961434 }}\n        onLoad={onMapLoad}\n      >\n        {propertyData.Buildings.map(building => (\n          <Marker\n            key={building.Id}\n            position={{\n              lat: building.geometry.coordinates[1],\n              lng: building.geometry.coordinates[0]\n            }}\n            onClick={() => {\n              setselectedBuilding(building);\n            }}\n          />\n        ))}\n\n        {selectedBuilding && (\n          <InfoWindow\n            onCloseClick={() => {\n              setselectedBuilding(null);\n            }}\n            position={{\n              lat: selectedBuilding.geometry.coordinates[1],\n              lng: selectedBuilding.geometry.coordinates[0]\n            }}\n          >\n            <div>\n              {selectedBuilding.Properties\n                .sort((a, b) => a.Origin[0].Price - b.Origin[0].Price)\n                .map((property, index) => {\n                  return (\n                    <div key={index} className=\"card\">\n                      <div className=\"content-image\">\n                        <img className=\"image\" style={imageStyle} src={property.Src} />\n                      </div>\n                      <div className=\"content-left\">\n                        <p>Agent: {property.Agent}</p>\n                        <p>Type:{property.Bedroom} Bedroom {property.Bathroom} Bathroom {property.Parking} Parking area</p>\n                        <p>Location: {property.Location}</p>\n                        <p>Distance:</p>\n                      </div>\n                      <div className=\"content-right\">\n                        {property.Origin.map((Source, index) => {\n                          return (\n                            <div key={index} className=\"content-right-main\">\n                              <div className=\"content-right-name\">\n                                <a href={Source.Url}>{Source.Name}</a>\n                              </div>\n                              <div className=\"content-right-price\">\n                                <p>$ {Source.Price}</p>\n                              </div>\n                            </div>\n                          )\n                        })\n                        }\n                      </div>\n                    </div>\n                  )\n                })\n              }\n            </div>\n\n          </InfoWindow>\n        )}\n      </GoogleMap>\n    </div>\n  );\n}\n\nfunction Search({ panTo }) {\n  const {\n    ready,\n    value,\n    suggestions: { status, data },\n    setValue,\n    clearSuggestions,\n  } = usePlacesAutocomplete({\n    requestOptions: {\n      location: { lat: () => 43.6532, lng: () => -79.3832 },\n      radius: 100 * 1000,\n    },\n  });\n\n  // https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service#AutocompletionRequest\n\n  const handleInput = (e) => {\n    setValue(e.target.value);\n  };\n\n  const handleSelect = async (address) => {\n    setValue(address, false);\n    clearSuggestions();\n\n    try {\n      const results = await getGeocode({ address });\n      const { lat, lng } = await getLatLng(results[0]);\n      // console.log(result);\n      // panTo({ lat, lng });\n    } catch (error) {\n      console.log(\"ðŸ˜± Error: \", error);\n    }\n  };\n\n  return (\n    <div className=\"search\">\n      <Combobox onSelect={handleSelect}>\n        <ComboboxInput\n          value={value}\n          onChange={handleInput}\n          disabled={!ready}\n          placeholder=\"Search your location\"\n        />\n        <ComboboxPopover>\n          <ComboboxList>\n            {status === \"OK\" &&\n              data.map(({ id, description }) => (\n                <ComboboxOption key={id} value={description} />\n              ))}\n          </ComboboxList>\n        </ComboboxPopover>\n      </Combobox>\n    </div>\n  );\n}\n\n\nvar backgroundStyle = {\n  backgroundSize: 'cover',\n  height: \"300px\",\n  backgroundRepeat: 'no-repeat',\n  opacity: '0.3',\n  backgroundImage: `url(${Background})`\n\n};\n\nvar imageStyle = {\n  width: \"200px\",\n  height: \"200px\",\n  backgroundRepeat: 'no-repeat'\n};\n\nclass PriceComparison extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pc: []\n    }\n  }\n\n\n  callAPI() {\n    fetch(\"http://localhost:3000/priceComparison\")\n      .then(res => res.json())\n      .then(res => this.setState({ pc: res.data }))\n      .catch(err => console.error(err))\n  }\n\n  componentDidMount() {\n    this.callAPI();\n\n  }\n\n  render() {\n    // var result = this.state.pc;\n    // var numOfResult = result.length;\n    // console.log(result);\n    const MapWrapped = withScriptjs(withGoogleMap(Map));\n\n    return (\n      <>\n        <div className=\"heading\">\n          <img className=\"logo\" src={logo} alt=\"Logo\" />\n          <h4 className=\"name\">AusNewRenters</h4>\n        </div>\n\n        <div className=\"sidebar\">\n          <Navbar />\n        </div>\n        <div className=\"text-box\" style={backgroundStyle}>\n        </div>\n        <div className=\"map-container\">\n          <div style={{ width: \"906px\", height: \"458px\" }}>\n            <MapWrapped\n              googleMapURL={`https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=${\n                process.env.REACT_APP_GOOGLE_KEY\n                }&language=en-AU`}\n              loadingElement={<div style={{ height: `100%` }} />}\n              containerElement={<div style={{ height: `100%` }} />}\n              mapElement={<div style={{ height: `100%` }} />}\n            />\n          </div>\n        </div>\n      </>\n\n    );\n  }\n}\n\n\n\n\n\nexport default PriceComparison;"]},"metadata":{},"sourceType":"module"}